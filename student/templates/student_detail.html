{% extends 'base.html'%}
{% block content %}

<br>
<div class="container">
    <table class="table table-striped">
        <thead>
            <tr>
                <th>번호</th>
                <th>학번</th>
                <th>출석일자</th>
                {% for attend in posts %}
                <script type="text/javascript">
                    var k1 = "{{attend.result}}";
                    var k2 = k1.replace(/&#39;/g, "\"");
                    var k3 = JSON.parse(k2);
                    var num = Object.keys(k3).length;
                    document.write(num + "<br>");
                    for(key in k3) {
                        document.write('key:' + key + ' / ' + 'value:' + k3[key] + "<br>");
                    }              
                    document.write("<p>안녕하세요</p>");
                </script>
                <th></th>
                {%endfor%}
                
            </tr>
        </thead>
        <tbody>
            {% for attend in posts %}
            <tr>
                <td>{{attend.id}}</td>
                <td>{{attend.username}}</td>
                <td>{{attend.time}}</td>
                <!-- <script type="text/javascript">
                    var k1 = "{{attend.result}}";
                    var k2 = k1.replace(/&#39;/g, "\"");
                    var k3 = JSON.parse(k2);                    
                    for(key in k3) {
                        document.write('key:' + key + ' / ' + 'value:' + k3[key] + "<br>");
                        }
                </script> -->
                <td id="result"></td>
            </tr>
            {%endfor%}
        </tbody>
    </table>
    <hr>
    <div class="container">
        <br><br>
        <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-center">
                <a class="page-link" href="?page=1">처음</a>
                {%if post.has_previous%}
                <a class="page-link" href="?page={{post.previous_page_number}}">이전</a>
                {% else %}
                <a class="page-link" href="#">이전</a>
                {%endif%}
                {% for page in page_range%}
                {%if page == post.number%}
                <li class="page-item active" aria-current="page" {% if page == post.number %}class="active"
                    {% endif %}>
                    <a class="page-link" href="?page={{page}}">{{page}}<span class="sr-only">(current)</span></a>
                </li>
                {%else%}
                <li class="page-item" {% if page == post.number %}class="active" {% endif %}>
                    <a class="page-link" href="?page={{page}}">{{page}}</a>
                </li>
                {%endif%}

                {% endfor %}
                {%if post.has_next%}
                <a class="page-link" href="?page={{post.next_page_number}}">다음</a>
                {%else%}
                <a class="page-link" href="#">다음</a>
                {%endif%}
                <a class="page-link" href="?page={{post.paginator.num_pages}}">끝</a>
            </ul>
        </nav>

    </div>
</div>
{% endblock %}